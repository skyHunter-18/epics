{% extends 'base.html' %}

{% block title %}
Employee Control
{% endblock %}

{% block content %}
<section>

    <!-- ======= Hero Section ======= -->
    <section id="hero" class="d-flex align-items-center">

        <div class="container">
            <div class="row">
                <div class="col-lg-6 d-flex flex-column justify-content-center pt-4 pt-lg-0 order-2 order-lg-1"
                    data-aos="fade-up" data-aos-delay="200">
                    <h1>Employee Control</h1>
                </div>
                <div class="col-lg-6 order-1 order-lg-2 hero-img" data-aos="zoom-in" data-aos-delay="200">
                    <img src="{{ url_for('static', filename='assets/img/hero-img.png') }}" class="img-fluid animated"
                        alt="">
                </div>
            </div>
        </div>

    </section>
    <!-- End Hero -->

    <!-- ======= About Us Section ======= -->
    <section id="about" class="about">
        <div class="container" data-aos="fade-up">

            <div class="section-title">
                <h2>Complaints</h2>
            </div>

            <div class="row content">
                <div class="col-lg-6">
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore
                        magna aliqua.
                    </p>
                    <ul>
                        <li><i class="ri-check-double-line"></i> Ullamco laboris nisi ut aliquip ex ea commodo consequat
                        </li>
                        <li><i class="ri-check-double-line"></i> Duis aute irure dolor in reprehenderit in voluptate
                            velit</li>
                        <li><i class="ri-check-double-line"></i> Ullamco laboris nisi ut aliquip ex ea commodo consequat
                        </li>
                    </ul>
                </div>
                <div class="col-lg-6 pt-4 pt-lg-0">
                    <p>
                        Ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit
                        in voluptate
                        velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                        proident, sunt in
                        culpa qui officia deserunt mollit anim id est laborum.
                    </p>
                    <a href="#" class="btn-learn-more">Learn More</a>
                </div>
            </div>

        </div>
    </section>
    <!-- End About Us Section -->
    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Mobile</th>
                <th scope="col">Date</th>
                <th scope="col">Address</th>
                <th scope="col">Pincode</th>
                <th scope="col">Image Link</th>
                <th scope="col">Status</th>
                <th scope="col">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for data in db.child("user_complaint").child().get(): %}
            <tr>
                <th scope="row">1</th>
                <td>{{data.val().get('name')}}</td>
                <td>{{data.val().get('mobile')}}</td>
                <td>{{data.val().get('date')}}</td>
                <td>{{data.val().get('address')}}</td>
                <td>{{data.val().get('pincode')}}</td>
                <td>
                    <a href="{{data.val().get('image')}}" target="_blank" rel="noopener noreferrer" class="primary">View Image</a>
                </td>
                <td>
                    {% if data.val().get('status') == "Unresolved" %}
                    <p style="color: red;">{{data.val().get('status')}}</p>
                    {% elif data.val().get('status') == "In Progress" %}
                    <p style="color:blue">{{data.val().get('status')}}</p>
                    {% else %}
                    <p style="color:green">{{data.val().get('status')}}</p>
                    {% endif %}
                </td>
                <td>
                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                          Update Status
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                          <li><a class="dropdown-item" value='db.val().update({"status" : "In Progress"})' onselect="update()">In Progress</a></li>
                          <li><a class="dropdown-item" value='db.val().update({"status" : "Resolved"})' onselect="update()">Resolved</a></li>
                          <li><a class="dropdown-item" value='db.val().update({"status" : "Unresolved"})' onselect="update()">Unresolved</a></li>
                        </ul>
                        <script>                            
                            function updateStatus() {
                                update(ref(db, ))
                            }
                        </script>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>
{% endblock %}